### UDP/TCP 的关系

- 相同点

  1. 都是传输层协议
  2. 都根据端口号，将数据交给相应的应用程序

- 不同点

  1. 面向连接

     TCP 面向连接 在客户端和服务端建立数据结构来维护双方交互的状

     UDP 面向无连接

  2. 可靠交互

     TCP 提供可靠交付。

     UDP 继承了 IP 包的特性，不保证不丢失，不保证按顺序到达。

  3. 面向字节流/基于数据报

     TCP 是面向字节流的。发送的时候发的是一个流，没头没尾。

     而 UDP 继承了 IP 的特性，基于数据报的，一个一个地发，一个一个地收。

  4. 拥塞控制

     TCP 是可以有拥塞控制的。包丢弃了或者网络的环境不好了，就会根据情况调整自己的行为

  5. 有无状态

     TCP 其实是一个有状态服务，UDP 则是无状态服务



### UDP 的特点

1. 简单 

   不建立连接，包的标题很短，只有8个字节。

   UDP 具有较好的实时性，网络开销也小

2. 不可靠 

   本身不对数据

   UDP 在传输数据前不建立连接，不对数据报进行检查与修改，无须等待对方的应答，所以会出现分组丢失、重复、乱序，应用程序需要负责传输可靠性方面的所有工作

3. 无拥塞控制

   在发送端，UDP传送数据的速度仅仅是受应用程序生成数据的速度、计算机的能力和传输带宽的限制





### UDP的使用场景

1. 需要资源少，在网络情况比较好的内网，或者对于丢包不敏感的应用 

   比如 DHCP，TFTP

2. 不需要一对一沟通，建立连接，而是可以广播的应用

3. 需要处理速度快，时延低，可以容忍少数丢包，但是要求即便网络拥塞，也毫不退缩，一往无前的时候



### UDP的使用案例

1. 网页或者 APP 的访问

   QUIC 快速 UDP 互联网连接

   原因: 即使使用HTTP2的共享连接，由于TCP 的严格顺序策略使得哪怕共享通道，无关的数据也还是要等到前一个数据处理好。

2. 流媒体的协议

   直播

   原因：即使部分丢帧，视频也能正常播放，对实时性的要求大于部分丢帧

3. 实时游戏

   原因: 游戏对实时要求较为严格，用户不能接受卡死

4. IOT物联网

   物联网通信协议 Thread

   原因: 终端资源少,维护 TCP 协议代价太大

5. 移动通信领域

   GTP-U

   原因: GTP 协议本身就包含复杂的手机上线下线的通信协议。如果基于 TCP，TCP 的机制就显得非常多余