### 知识框架

- 基础环境
  - 堆空间
    - 树状存储结构
    - 存储对象
    - 存储闭包函数引用的原生类型
  - 栈空间
    - FIFO
    - 存储原生类型
  - 全局执行上下文
    - 初始化的this
    - 全局作用域
    - 全局对象
  - 宿主环境
    - 宿主类型
      - 浏览器
      - Node.js
      - 其他宿主
    - 内置
      - 内置函数
      - 内置对象
        - Chrome.window
        - Node.global
  - ***事件循环系统***
    - 消息队列
    - 任务调度系统

- V8执行流程

  - 词法分析

  - 语法分析
    - AST
    - 作用域
    - 惰性编译
    - 预编译器
    - 预解析器
  - 字节码
  - 解释执行字节码
    - 基于寄存器的虚拟机
  - 即时编译 JIT
    - 监控器
    - 编译器
    - 隐藏类
    - 反优化

- 事件循环系统

  - 什么是事件循环系统

    - JavaScript 是单线程模式
    - 单线程同时只能执行一个任务
    - 有新的任务就需要排队执行 
    - 引入消息队列
    - 消息队列的任务是宏任务
    - 任务调度器
      - 循环读取消息队列中的任务
      - 分派给指定的任务处理器

  - 异步编程

    - 回调函数

      缺点

      - 可读性差
      - 代码维护难
      - 回调地狱

    - Promise模式 （本质是状态机）

      - 半同步的方式编写异步代码
      - 使用了微任务
      - 改造了回调函数
      - 可读性提升

    - async/await方式 （本质是对 Generator 和 Promise 组合)

      - 以同步的方式来写异步代码
      - 使用了微任务
      - 使用了协程
      - 可读性大幅提升
      - 背后原理

- JavaScript 设计思想

  - 函数是一等公民
  - 类型系统和垃圾回收
  - 作用域
  - 原型链继承

- 垃圾回收系统

  - 自动垃圾回收
  - 回收方式
    - 手动
    - 智能指针
      - 引用计数
    - 自动内存管理
      - 根元素遍历
  - 代记假说
    - 大多数对象都是短命的
    - 不短命的会活很久
  - 分代收集
    - 新生代
    - 老生代
  - 垃圾回收器
    - 主垃圾回收器 老生代
    - 副垃圾回收器 新生代
  - 垃圾回收流程
    - stop the world
      - 增量回收



### 为什么V8比较快





