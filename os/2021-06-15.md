### 你能说一下操作系统的启动和初始化过程吗？

1. BIOS 

   a. 自检

   b. 建立中断向量表和中断服务程序

2. Bootloader 如 Grub2

   加载操作系统启动所需的引导扇区，并将CPU从实模式切换到保护模式，建立分段分页，打开地址线，选择操作系统

3. Linux 内核初始化

   a. 初始化0号进程

   b. 初始化中断处理模块,内存管理模块，进程管理模块，文件系统

   c. 其他初始化，包括初始化用户态的祖先进程1号进程以及内核态的祖先进程2号进程



### 请问进程和线程的概念和区别是什么

进程即进行中的程序，线程是进程中一个单一顺序的控制流。

线程是进程中的一部分，一个进程可以有多个线程，但线程只能存在于一个进程中。

区别：

1. 根本区别：进程是操作系统资源调度的基本单位，线程是任务的调度执行的基本单位
2. 开销方面：进程都有自己的独立数据空间，程序之间的切换开销大；线程也有自己的运行栈和程序计数器，线程间的切换开销较小。
3. 共享空间：进程拥有各自独立的地址空间、资源，所以共享复杂，需要用IPC（Inter-Process Communication，进程间通信），但是同步简单。而线程共享所属进程的资源，因此共享简单，但是同步复杂，需要用加锁等措施。

在linux中，进程和线程都属于任务，不同的是创建进程的话，调用的系统调用是 fork，在 copy_process 函数里面，会将五大结构 files_struct、fs_struct、sighand_struct、signal_struct、mm_struct 都复制一遍，从此父进程和子进程各用各的数据结构。

而创建线程的话，调用的是系统调用 clone，在 copy_process 函数里面， 五大结构仅仅是引用计数加一，也即线程共享进程的数据结构。



### 请问函数调用堆栈的原理是什么

当调用一个函数时，将创建一个栈桢来支持该函数的执行。栈桢包含函数的局部变量和调用者传递给函数的参数。栈桢还包含管理信息，允许被调用的函数(被调用方)安全地返回给调用方。

计算机通过保存以及还原 CPU的栈指针和基址指针寄存器的相互配合来实现了指令的栈式调用。

